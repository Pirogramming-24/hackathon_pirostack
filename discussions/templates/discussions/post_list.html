{% extends 'base.html' %}

{% block title %}ì»¤ë®¤ë‹ˆí‹°{% endblock %}

{% block content %}
<div class="flex">
    <!-- ì‚¬ì´ë“œë°” -->
    <aside class="w-64 flex-shrink-0 border-r border-gray-200 bg-white px-6 py-8 min-h-screen">
        <div class="sticky top-24">
            <!-- ìƒˆ ê¸€ ì‘ì„± ë²„íŠ¼ -->
            <a href="{% url 'discussions:post_create' %}" class="block w-full mb-6 px-4 py-2 bg-[#059212] text-white text-center rounded-lg hover:bg-[#06D001] transition-colors font-medium">
                + ìƒˆ ê¸€ ì‘ì„±
            </a>

            <!-- ì „ì²´ ë³´ê¸° -->
            <a href="{% url 'discussions:post_list' %}" class="block px-4 py-2 mb-2 rounded-md bg-gray-100 font-semibold transition-colors">
                ğŸ’¬ ì „ì²´ ê²Œì‹œê¸€
            </a>

            <!-- ì§ˆë¬¸ ê²Œì‹œíŒ ë§í¬ -->
            <a href="{% url 'questions:list' %}" class="block px-4 py-2 mb-4 rounded-md hover:bg-gray-50 transition-colors">
                ğŸ“‹ ì§ˆë¬¸ ê²Œì‹œíŒ
            </a>

            <!-- ì •ë ¬ ì˜µì…˜ -->
            <div class="mb-4 pt-4 border-t border-gray-200">
                <p class="px-4 py-2 text-xs font-semibold text-gray-500 uppercase">ì •ë ¬</p>
                <a href="?sort=latest" class="block px-4 py-1.5 text-sm rounded-md {% if sort == 'latest' %}bg-[#059212] text-white{% else %}text-gray-600 hover:bg-gray-50{% endif %} transition-colors">
                    ìµœì‹ ìˆœ
                </a>
                <a href="?sort=oldest" class="block px-4 py-1.5 text-sm rounded-md {% if sort == 'oldest' %}bg-[#059212] text-white{% else %}text-gray-600 hover:bg-gray-50{% endif %} transition-colors">
                    ì˜¤ë˜ëœìˆœ
                </a>
            </div>
        </div>
    </aside>

    <!-- ë©”ì¸ ì»¨í…ì¸  -->
    <main class="flex-1 min-w-0 max-w-5xl mx-auto px-8 py-8">
        <div class="mb-6">
            <h1 class="text-3xl font-bold mb-2">ì»¤ë®¤ë‹ˆí‹°</h1>
            <p class="text-gray-600">ì´ {{ posts.count }}ê°œì˜ ê²Œì‹œê¸€</p>
        </div>

    {% if posts %}
        <div class="space-y-4">
            {% for post in posts %}
            <a href="{% url 'discussions:post_detail' post.id %}" class="block p-5 bg-white border border-gray-200 rounded-lg hover:border-gray-300 hover:shadow-md transition-all">
                <div class="flex items-start justify-between gap-4 mb-3">
                    <h3 class="text-lg font-semibold flex-1">
                        {{ post.title }}
                    </h3>
                </div>
                <p class="text-sm text-gray-600 mb-3 line-clamp-2">
                    {{ post.content|truncatechars:100 }}
                </p>
                <div class="flex items-center gap-4 text-sm text-gray-500">
                    <span class="font-medium">{{ post.author.username }}</span>
                    <span>Â·</span>
                    <span>{{ post.created_at|timesince }} ago</span>
                    <span>Â·</span>
                    <span class="flex items-center gap-1">
                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 16 16">
                            <path d="M1 2.75C1 1.784 1.784 1 2.75 1h10.5c.966 0 1.75.784 1.75 1.75v7.5A1.75 1.75 0 0 1 13.25 12H9.06l-2.573 2.573A1.458 1.458 0 0 1 4 13.543V12H2.75A1.75 1.75 0 0 1 1 10.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h2a.75.75 0 0 1 .75.75v2.19l2.72-2.72a.749.749 0 0 1 .53-.22h4.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"/>
                        </svg>
                        {{ post.comments.count }}
                    </span>
                </div>
            </a>
            {% endfor %}
        </div>
    {% else %}
        <div class="text-center py-12 bg-gray-50 rounded-lg">
            <svg class="w-16 h-16 mx-auto text-gray-400 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"/>
            </svg>
            <p class="text-gray-600 text-lg">ì•„ì§ ê²Œì‹œê¸€ì´ ì—†ìŠµë‹ˆë‹¤</p>
            <p class="text-gray-500 text-sm mt-2">ì²« ë²ˆì§¸ ê²Œì‹œê¸€ì„ ì‘ì„±í•´ë³´ì„¸ìš”!</p>
        </div>
    {% endif %}
    </main>
</div>
{% endblock %}
