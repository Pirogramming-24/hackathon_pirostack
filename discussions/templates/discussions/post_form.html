{% extends 'base.html' %}

{% block title %}
{% if post %}게시글 수정{% else %}게시글 작성{% endif %}
{% endblock %}

{% block content %}
<div class="max-w-3xl mx-auto px-8 py-8">
    <h1 class="text-3xl font-bold mb-6">
        {% if post %}게시글 수정{% else %}새 게시글 작성{% endif %}
    </h1>

    <form method="post" enctype="multipart/form-data" class="space-y-6">
        {% csrf_token %}

        <div>
            <label for="title" class="block text-sm font-semibold text-gray-700 mb-2">제목</label>
            <input 
                type="text" 
                name="title" 
                id="title"
                required 
                value="{{ post.title|default:'' }}"
                class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#059212] focus:border-transparent"
                placeholder="제목을 입력하세요"
            >
        </div>

        <div>
            <label for="content" class="block text-sm font-semibold text-gray-700 mb-2">내용</label>
            <textarea 
                name="content" 
                id="content"
                rows="12" 
                required
                class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#059212] focus:border-transparent resize-none"
                placeholder="내용을 입력하세요"
            >{{ post.content|default:'' }}</textarea>
        </div>

        <div>
            <label for="link" class="block text-sm font-semibold text-gray-700 mb-2">참고 링크 (선택사항)</label>
            <input 
                type="url" 
                name="link" 
                id="link"
                value="{{ post.link|default:'' }}"
                class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#059212] focus:border-transparent"
                placeholder="https://example.com"
            >
        </div>

        <div>
            <label for="image" class="block text-sm font-semibold text-gray-700 mb-2">이미지 (선택사항)</label>
            <input 
                type="file" 
                name="image" 
                id="image"
                accept="image/*"
                class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#059212] focus:border-transparent file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-medium file:bg-gray-50 file:text-gray-700 hover:file:bg-gray-100"
            >
            {% if post.image %}
                <p class="text-sm text-gray-500 mt-2">현재 이미지가 업로드되어 있습니다. 새 파일을 선택하면 교체됩니다.</p>
            {% endif %}
        </div>

        <div class="flex gap-3 pt-4">
            <button 
                type="submit" 
                class="px-6 py-2 bg-[#059212] text-white rounded-md hover:bg-[#06D001] transition-colors font-medium"
            >
                {% if post %}수정 완료{% else %}작성 완료{% endif %}
            </button>
            <a 
                href="{% url 'discussions:post_list' %}" 
                class="px-6 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors font-medium"
            >
                취소
            </a>
        </div>
    </form>
</div>
{% endblock %}
